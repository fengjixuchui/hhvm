--- legacy
+++ direct decl
@@ -1,249 +1,162 @@
 [("\\reads_off_varray",
   (Shallow_decl_defs.Fun
      { Typing_defs.fe_deprecated = None;
        fe_type =
        (Rwitness (root|varray_darray_const_ctx.php line 5, characters 10-25),
         (Tfun
-           { ft_arity = (Fstandard ());
-             ft_tparams =
-             [{ Typing_defs_core.tp_variance = Invariant;
-                tp_name = ([5:39-41], "T$v"); tp_tparams = [];
-                tp_constraints =
-                [(Constraint_as,
-                  (Rhint (root|varray_darray_const_ctx.php line 5, characters 27-37),
-                   (Tvarray
-                      (Rhint (root|varray_darray_const_ctx.php line 5, characters 34-36),
-                       (Tprim Tint)))))
-                  ];
-                tp_reified = Erased; tp_user_attributes = [] };
-               { Typing_defs_core.tp_variance = Invariant;
-                 tp_name = ([5:43-48], "T$v@C"); tp_tparams = [];
-                 tp_constraints = []; tp_reified = Erased;
-                 tp_user_attributes = [] };
-               { Typing_defs_core.tp_variance = Invariant;
-                 tp_name = ([5:50-58], "T$v@CMut"); tp_tparams = [];
-                 tp_constraints = []; tp_reified = Erased;
-                 tp_user_attributes = [] }
-               ];
-             ft_where_constraints =
-             [((Rhint (root|varray_darray_const_ctx.php line 5, characters 43-47),
-                (Tgeneric ("T$v@C", []))),
-               Constraint_eq,
-               (Rhint (root|varray_darray_const_ctx.php line 5, characters 43-47),
-                (Taccess
-                   ((Rhint (root|varray_darray_const_ctx.php line 5, characters 43-47),
-                     (Tgeneric ("T$v", []))),
-                    [([5:47-48], "C")]))));
-               ((Rhint (root|varray_darray_const_ctx.php line 5, characters 50-57),
-                 (Tgeneric ("T$v@CMut", []))),
-                Constraint_eq,
-                (Rhint (root|varray_darray_const_ctx.php line 5, characters 50-57),
-                 (Taccess
-                    ((Rhint (root|varray_darray_const_ctx.php line 5, characters 50-57),
-                      (Tgeneric ("T$v", []))),
-                     [([5:54-58], "CMut")]))))
-               ];
+           { ft_arity = (Fstandard ()); ft_tparams = [];
+             ft_where_constraints = [];
              ft_params =
              [{ fp_pos = [5:39-41]; fp_name = (Some "$v");
                 fp_type =
                 { et_enforced = false;
                   et_type =
-                  (Rhint (root|varray_darray_const_ctx.php line 5, characters 39-40),
-                   (Tgeneric ("T$v", [])))
+                  (Rhint (root|varray_darray_const_ctx.php line 5, characters 27-37),
+                   (Tvarray
+                      (Rhint (root|varray_darray_const_ctx.php line 5, characters 34-36),
+                       (Tprim Tint))))
                   };
                 fp_rx_annotation = None;
                 fp_flags =
                 (make_fp_flags ~mutability:None ~accept_disposable:false
                   ~has_default:false ~mode:Typing_defs_core.FPnormal
                   ~ifc_external:false ~ifc_can_call:false ~is_atom:false);
                  }
                ];
              ft_implicit_params =
              { capability =
                (CapTy (Rhint (root|varray_darray_const_ctx.php line 5, characters 42-58),
                        (Tintersection
                           [(Rhint (root|varray_darray_const_ctx.php line 5, characters 43-47),
-                            (Tgeneric ("T$v@C", [])));
+                            (Taccess
+                               ((Rhint (root|varray_darray_const_ctx.php line 5, characters 43-47),
+                                 (Tapply (([5:43-45], "\\$v"), []))),
+                                [([5:47-48], "C")])));
                             (Rhint (root|varray_darray_const_ctx.php line 5, characters 50-57),
-                             (Tgeneric ("T$v@CMut", [])))
+                             (Taccess
+                                ((Rhint (root|varray_darray_const_ctx.php line 5, characters 50-57),
+                                  (Tapply (([5:50-52], "\\$v"), []))),
+                                 [([5:54-58], "CMut")])))
                             ])))
                };
              ft_ret =
              { et_enforced = false;
                et_type =
                (Rhint (root|varray_darray_const_ctx.php line 5, characters 61-64),
                 (Tprim Tvoid))
                };
              ft_flags =
              (make_ft_flags FSync None ~return_disposable:false
                ~returns_mutable:false ~returns_void_to_rx:false);
              ft_reactive = Nonreactive; ft_ifc_decl = FDPolicied {PUBLIC} }));
        fe_pos = [5:10-26]; fe_php_std_lib = false }));
   ("\\reads_off_darray",
    (Shallow_decl_defs.Fun
       { Typing_defs.fe_deprecated = None;
         fe_type =
         (Rwitness (root|varray_darray_const_ctx.php line 7, characters 10-25),
          (Tfun
-            { ft_arity = (Fstandard ());
-              ft_tparams =
-              [{ Typing_defs_core.tp_variance = Invariant;
-                 tp_name = ([7:44-46], "T$v"); tp_tparams = [];
-                 tp_constraints =
-                 [(Constraint_as,
+            { ft_arity = (Fstandard ()); ft_tparams = [];
+              ft_where_constraints = [];
+              ft_params =
+              [{ fp_pos = [7:44-46]; fp_name = (Some "$v");
+                 fp_type =
+                 { et_enforced = false;
+                   et_type =
                    (Rhint (root|varray_darray_const_ctx.php line 7, characters 27-42),
                     (Tdarray (
                        (Rhint (root|varray_darray_const_ctx.php line 7, characters 34-36),
                         (Tprim Tint)),
                        (Rhint (root|varray_darray_const_ctx.php line 7, characters 39-41),
                         (Tprim Tint))
-                       ))))
-                   ];
-                 tp_reified = Erased; tp_user_attributes = [] };
-                { Typing_defs_core.tp_variance = Invariant;
-                  tp_name = ([7:48-53], "T$v@C"); tp_tparams = [];
-                  tp_constraints = []; tp_reified = Erased;
-                  tp_user_attributes = [] };
-                { Typing_defs_core.tp_variance = Invariant;
-                  tp_name = ([7:55-63], "T$v@CMut"); tp_tparams = [];
-                  tp_constraints = []; tp_reified = Erased;
-                  tp_user_attributes = [] }
-                ];
-              ft_where_constraints =
-              [((Rhint (root|varray_darray_const_ctx.php line 7, characters 48-52),
-                 (Tgeneric ("T$v@C", []))),
-                Constraint_eq,
-                (Rhint (root|varray_darray_const_ctx.php line 7, characters 48-52),
-                 (Taccess
-                    ((Rhint (root|varray_darray_const_ctx.php line 7, characters 48-52),
-                      (Tgeneric ("T$v", []))),
-                     [([7:52-53], "C")]))));
-                ((Rhint (root|varray_darray_const_ctx.php line 7, characters 55-62),
-                  (Tgeneric ("T$v@CMut", []))),
-                 Constraint_eq,
-                 (Rhint (root|varray_darray_const_ctx.php line 7, characters 55-62),
-                  (Taccess
-                     ((Rhint (root|varray_darray_const_ctx.php line 7, characters 55-62),
-                       (Tgeneric ("T$v", []))),
-                      [([7:59-63], "CMut")]))))
-                ];
-              ft_params =
-              [{ fp_pos = [7:44-46]; fp_name = (Some "$v");
-                 fp_type =
-                 { et_enforced = false;
-                   et_type =
-                   (Rhint (root|varray_darray_const_ctx.php line 7, characters 44-45),
-                    (Tgeneric ("T$v", [])))
+                       )))
                    };
                  fp_rx_annotation = None;
                  fp_flags =
                  (make_fp_flags ~mutability:None ~accept_disposable:false
                    ~has_default:false ~mode:Typing_defs_core.FPnormal
                    ~ifc_external:false ~ifc_can_call:false ~is_atom:false);
                   }
                 ];
               ft_implicit_params =
               { capability =
                 (CapTy (Rhint (root|varray_darray_const_ctx.php line 7, characters 47-63),
                         (Tintersection
                            [(Rhint (root|varray_darray_const_ctx.php line 7, characters 48-52),
-                             (Tgeneric ("T$v@C", [])));
+                             (Taccess
+                                ((Rhint (root|varray_darray_const_ctx.php line 7, characters 48-52),
+                                  (Tapply (([7:48-50], "\\$v"), []))),
+                                 [([7:52-53], "C")])));
                              (Rhint (root|varray_darray_const_ctx.php line 7, characters 55-62),
-                              (Tgeneric ("T$v@CMut", [])))
+                              (Taccess
+                                 ((Rhint (root|varray_darray_const_ctx.php line 7, characters 55-62),
+                                   (Tapply (([7:55-57], "\\$v"), []))),
+                                  [([7:59-63], "CMut")])))
                              ])))
                 };
               ft_ret =
               { et_enforced = false;
                 et_type =
                 (Rhint (root|varray_darray_const_ctx.php line 7, characters 66-69),
                  (Tprim Tvoid))
                 };
               ft_flags =
               (make_ft_flags FSync None ~return_disposable:false
                 ~returns_mutable:false ~returns_void_to_rx:false);
               ft_reactive = Nonreactive; ft_ifc_decl = FDPolicied {PUBLIC} }));
         fe_pos = [7:10-26]; fe_php_std_lib = false }));
   ("\\reads_off_varray_or_darray",
    (Shallow_decl_defs.Fun
       { Typing_defs.fe_deprecated = None;
         fe_type =
         (Rwitness (root|varray_darray_const_ctx.php line 9, characters 10-35),
          (Tfun
-            { ft_arity = (Fstandard ());
-              ft_tparams =
-              [{ Typing_defs_core.tp_variance = Invariant;
-                 tp_name = ([10:25-27], "T$v"); tp_tparams = [];
-                 tp_constraints =
-                 [(Constraint_as,
-                   (Rhint (root|varray_darray_const_ctx.php line 10, characters 3-23),
-                    (Tvarray_or_darray
-                       (Rvarray_or_darray_key (root|varray_darray_const_ctx.php line 10, characters 3-23),
-                        (Tprim Tarraykey)),
-                       (Rhint (root|varray_darray_const_ctx.php line 10, characters 20-22),
-                        (Tprim Tint)))))
-                   ];
-                 tp_reified = Erased; tp_user_attributes = [] };
-                { Typing_defs_core.tp_variance = Invariant;
-                  tp_name = ([11:3-8], "T$v@C"); tp_tparams = [];
-                  tp_constraints = []; tp_reified = Erased;
-                  tp_user_attributes = [] };
-                { Typing_defs_core.tp_variance = Invariant;
-                  tp_name = ([11:10-18], "T$v@CMut"); tp_tparams = [];
-                  tp_constraints = []; tp_reified = Erased;
-                  tp_user_attributes = [] }
-                ];
-              ft_where_constraints =
-              [((Rhint (root|varray_darray_const_ctx.php line 11, characters 3-7),
-                 (Tgeneric ("T$v@C", []))),
-                Constraint_eq,
-                (Rhint (root|varray_darray_const_ctx.php line 11, characters 3-7),
-                 (Taccess
-                    ((Rhint (root|varray_darray_const_ctx.php line 11, characters 3-7),
-                      (Tgeneric ("T$v", []))),
-                     [([11:7-8], "C")]))));
-                ((Rhint (root|varray_darray_const_ctx.php line 11, characters 10-17),
-                  (Tgeneric ("T$v@CMut", []))),
-                 Constraint_eq,
-                 (Rhint (root|varray_darray_const_ctx.php line 11, characters 10-17),
-                  (Taccess
-                     ((Rhint (root|varray_darray_const_ctx.php line 11, characters 10-17),
-                       (Tgeneric ("T$v", []))),
-                      [([11:14-18], "CMut")]))))
-                ];
+            { ft_arity = (Fstandard ()); ft_tparams = [];
+              ft_where_constraints = [];
               ft_params =
               [{ fp_pos = [10:25-27]; fp_name = (Some "$v");
                  fp_type =
                  { et_enforced = false;
                    et_type =
-                   (Rhint (root|varray_darray_const_ctx.php line 10, characters 25-26),
-                    (Tgeneric ("T$v", [])))
+                   (Rhint (root|varray_darray_const_ctx.php line 10, characters 3-23),
+                    (Tvarray_or_darray
+                       (Rvarray_or_darray_key (root|varray_darray_const_ctx.php line 10, characters 3-23),
+                        (Tprim Tarraykey)),
+                       (Rhint (root|varray_darray_const_ctx.php line 10, characters 20-22),
+                        (Tprim Tint))))
                    };
                  fp_rx_annotation = None;
                  fp_flags =
                  (make_fp_flags ~mutability:None ~accept_disposable:false
                    ~has_default:false ~mode:Typing_defs_core.FPnormal
                    ~ifc_external:false ~ifc_can_call:false ~is_atom:false);
                   }
                 ];
               ft_implicit_params =
               { capability =
                 (CapTy (Rhint (root|varray_darray_const_ctx.php line 11, characters 2-18),
                         (Tintersection
                            [(Rhint (root|varray_darray_const_ctx.php line 11, characters 3-7),
-                             (Tgeneric ("T$v@C", [])));
+                             (Taccess
+                                ((Rhint (root|varray_darray_const_ctx.php line 11, characters 3-7),
+                                  (Tapply (([11:3-5], "\\$v"), []))),
+                                 [([11:7-8], "C")])));
                              (Rhint (root|varray_darray_const_ctx.php line 11, characters 10-17),
-                              (Tgeneric ("T$v@CMut", [])))
+                              (Taccess
+                                 ((Rhint (root|varray_darray_const_ctx.php line 11, characters 10-17),
+                                   (Tapply (([11:10-12], "\\$v"), []))),
+                                  [([11:14-18], "CMut")])))
                              ])))
                 };
               ft_ret =
               { et_enforced = false;
                 et_type =
                 (Rhint (root|varray_darray_const_ctx.php line 11, characters 21-24),
                  (Tprim Tvoid))
                 };
               ft_flags =
               (make_ft_flags FSync None ~return_disposable:false
                 ~returns_mutable:false ~returns_void_to_rx:false);
               ft_reactive = Nonreactive; ft_ifc_decl = FDPolicied {PUBLIC} }));
         fe_pos = [9:10-36]; fe_php_std_lib = false }))
   ]
